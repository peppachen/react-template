###  自动化路由 (约定式路由)

Umi 会根据项目中的文件目录结构自动生成路由。

```tsx
//目录结构



src/pages/

 ├── index.tsx     // 对应路径 "/"

 ├── about.tsx     // 对应路径 "/about"

 └── user/

   ├── index.tsx   // 对应路径 "/user"

   └── profile.tsx  // 对应路径 "/user/profile"



//Umi 会自动生成以下路由：



[

 { path: '/', component: '@/pages/index' },

 { path: '/about', component: '@/pages/about' },

 { path: '/user', component: '@/pages/user/index' },

 { path: '/user/profile', component: '@/pages/user/profile' }

]
```



#### 特点

- 无需显式定义路由配置，减少代码量。

- 文件夹和文件名称即为路由路径。



### 配置式路由

如果项目需要更复杂的路由控制，可以使用 config.ts 文件定义路由。

```tsx
//src/routes.ts**


export default [

 { path: '/', component: '@/pages/index' },

 { path: '/about', component: '@/pages/about' },

 {

  path: '/user',

  routes: [

   { path: '/user', component: '@/pages/user/index' },

   { path: '/user/profile', component: '@/pages/user/profile' },

  ],

 },

];

//在 config.ts 中引入路由配置：

import routes from './routes';



export default {

 routes, // 配置式路由

};
```



### 动态路由

- Umi 支持动态路由，通过 [] 包裹参数来实现。

```tsx
//文件名 [param].tsx 会被解析为动态参数。
src/pages/user/[id].tsx
/**
* 访问 /user/123 时：
* 文件路径 src/pages/user/[id].tsx 对应的动态路由路径是 /user/:id。
*/

//在组件中可以通过 useParams 钩子获取参数：

import { useParams } from '@umijs/max';


function UserDetail() {

 const { id } = useParams();

 return <h2>User ID: {id}</h2>;

}
```



### 路由懒加载

Umi 内置支持懒加载，通过 `dynamicImport` 配置开启。

```tsx


//在 config.ts 中配置：



export default {

 dynamicImport: {},

};



//在组件中使用懒加载：



export default [

 { path: '/', component: '@/pages/index' },

 {

  path: '/user',

  routes: [

   {

​    path: '/user/profile',

​    component: '@/pages/user/profile',

​    wrappers: ['@/wrappers/auth'], // 路由守卫

   },

  ],

 },

];
```



###  路由守卫 (wrappers)

Umi 提供 wrappers 属性，用于封装路由组件，实现路由守卫（如权限控制）。

```tsx


//创建一个认证封装组件：


// src/wrappers/auth.tsx

import React from 'react';


export default (props: any) => {

 const isAuthenticated = true; // 模拟认证

 if (!isAuthenticated) {

  return <h3>You are not authorized!</h3>;

 }

 return <>{props.children}</>;

};


//在路由中使用：



export default [

 {

  path: '/admin',

  component: '@/pages/admin',

  wrappers: ['@/wrappers/auth'], // 路由守卫

 },

];
```

### 嵌套路由

Umi 支持嵌套路由，通过文件夹结构或配置实现。

```tsx
//目录结构

src/pages/

 └── user/

   ├── index.tsx    // 路径 "/user"

   ├── profile.tsx   // 路径 "/user/profile"

   └── settings.tsx  // 路径 "/user/settings"


// 页面代码：

function UserLayout({ children }: any) {

 return (

    <div>

   <h1>User Page</h1>

   {children}

  </div>

 );

}


export default UserLayout;
//嵌套路由会自动渲染子组件。

```

